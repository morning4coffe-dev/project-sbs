<Page x:Class="ProjectSBS.Presentation.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:ProjectSBS.Presentation"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:not_win="http://uno.ui/not_win"
      mc:Ignorable="d not_win"
      xmlns:uen="using:Uno.Extensions.Navigation.UI"
      xmlns:utu="using:Uno.Toolkit.UI"
      xmlns:page="using:ProjectSBS.Presentation.Components"
      NavigationCacheMode="Required"
      not_win:Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <page:PageShell uen:Region.Attached="True">
        <page:PageShell.ContentView>

            <UserControl>
                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroup>
                        <VisualState x:Name="WideState">
                            <VisualState.StateTriggers>
                                <AdaptiveTrigger MinWindowWidth="1000" />
                            </VisualState.StateTriggers>
                            <VisualState.Setters>
                                <Setter Target="navigation.IsPaneVisible"
                                        Value="True" />
                            </VisualState.Setters>
                        </VisualState>

                        <VisualState x:Name="NarrowState">
                            <VisualState.StateTriggers>
                                <AdaptiveTrigger MinWindowWidth="0" />
                            </VisualState.StateTriggers>
                            <VisualState.Setters>
                                <!--<Setter Target="navigation.IsPaneVisible"
                                        Value="False" />-->
                            </VisualState.Setters>
                        </VisualState>
                    </VisualStateGroup>
                </VisualStateManager.VisualStateGroups>

                <NavigationView x:Name="navigation"
                                Grid.Row="1"
                                IsBackButtonVisible="Collapsed"
                                uen:Region.Attached="True"
                                IsSettingsVisible="False">
                    <NavigationView.PaneCustomContent>
                        <StackPanel>
                            <Button Background="Transparent"
                                    BorderThickness="0"
                                    HorizontalAlignment="Stretch"
                                    Margin="4"
                                    HorizontalContentAlignment="Left">
                                <StackPanel Orientation="Horizontal"
                                            Spacing="8">
                                    <PersonPicture Width="45" />
                                    <TextBlock  Text="{Binding User.Name}"
                                                VerticalAlignment="Center" />
                                </StackPanel>
                            </Button>
                            <Button Content="Go to Second Page"
                                    AutomationProperties.AutomationId="SecondPageButton"
                                    Command="{Binding GoToSecond}" />
                            <Button Content="Logout"
                                    Command="{Binding Logout}" />
                            <Button Content="Theme"
                                    Command="{Binding Logout}" />
                        </StackPanel>
                    </NavigationView.PaneCustomContent>

                    <NavigationView.MenuItems>
                        <!-- Add your menu items here -->
                        <NavigationViewItem Content="One"
                                            IsSelected="True"
                                            Icon="AddFriend" />
                        <NavigationViewItem Content="Two"
                                            Icon="CellPhone" />
                    </NavigationView.MenuItems>

                    <local:HomePage />
                        
                </NavigationView>
            </UserControl>

        </page:PageShell.ContentView>
    </page:PageShell>
</Page>
